CREATE DATABASE QLTHPTNT
use QLTHPTNT
--1


DROP TABLE KHOI
CREATE TABLE KHOI (
	MAKHOI CHAR (4) PRIMARY KEY NOT NULL,
	TENKHOI NVARCHAR(8),
	SLLOP INT
)

CREATE TABLE MONHOC (
	MAMH CHAR(4) PRIMARY KEY NOT NULL,
	TENMH NVARCHAR (20),
)

CREATE TABLE NVGIAOVU (
	MANV CHAR(4) PRIMARY KEY NOT NULL,
	TENNV  NVARCHAR(50),
	GT BIT,
	NGAYSINH DATE,
	CHITIET NVARCHAR(50),
)

CREATE TABLE GIAOVIEN (
	MAGV CHAR(4) PRIMARY KEY,
	TENGV NVARCHAR(50),
	GT bit,
	NGAYSINH DATE,
	MAMH CHAR(4) NOT NULL,
	CHITIET NVARCHAR(50),
	constraint FK_MH foreign key (MAMH) references MONHOC(MAMH),
)

CREATE TABLE LOP(
	MALOP CHAR (5) PRIMARY KEY NOT NULL,
	MAKHOI CHAR (4) NOT NULL,
	MAGV CHAR(4) ,
	SISO int,
	constraint FK_KHOI foreign key (MAKHOI) references KHOI (MAKHOI),
	constraint FK_GV foreign key (MAGV) references GIAOVIEN (MAGV),
)

CREATE TABLE HOCSINH (
	MAHS CHAR (4) PRIMARY KEY NOT NULL,
	TENHS NVARCHAR(50),
	MALOP CHAR (5) NOT NULL,
	GT bit,
	NGAYSINH DATE,
	CHITIET NVARCHAR(50),
	constraint FK_LOP foreign key (MALOP) references LOP (MALOP),
)

DROP TABLE HOCSINH
CREATE TABLE BANGDIEM (
	MABANGDIEM CHAR(7) PRIMARY KEY NOT NULL,
	MAHS CHAR (4) NOT NULL,
	TENHS NVARCHAR(50),
	MALOP CHAR (5) NOT NULL,
	MAMH CHAR(4) NOT NULL,
	DIEMTRUNGBINH float,
	HOCLUC NVARCHAR(10),
	MANV CHAR(4) NOT NULL,
	constraint FK_HS foreign key (MAHS) references HOCSINH (MAHS),
	constraint FK_NV foreign key (MANV) references NVGIAOVU (MANV),
	constraint FK_DIEMLOP foreign key (MALOP) references LOP (MALOP),
	constraint FK_DIEMMON foreign key (MAMH) references MONHOC (MAMH)
)

DROP TABLE Users

CREATE TABLE Users (
	ID int PRIMARY KEY not null identity(1,1),
	TenTK varchar(20),
	MatKhau varchar(20),
	MOTA nvarchar(50)
)






--1
INSERT INTO KHOI VALUES ('K10', N'Khối 10', 2)
INSERT INTO KHOI VALUES ('K11', N'Khối 11', 2)
INSERT INTO KHOI VALUES ('K12', N'Khối 12', 2)

--2
INSERT INTO MONHOC VALUES ('MHT', N'Toán')
INSERT INTO MONHOC VALUES ('MHH', N'Hóa')
INSERT INTO MONHOC VALUES ('MHL', N'Lý')

--3
INSERT INTO NVGIAOVU VALUES ('NV01', N'Nguyễn Phương Hằng',0, convert(datetime,'09/23/1979',101),N' ')
INSERT INTO NVGIAOVU VALUES ('NV02', N'Trần Ngọc Phủ', 1, convert(datetime,'12/02/1998',102), N' ')
INSERT INTO NVGIAOVU VALUES ('NV03', N'Trịnh Tuấn Trung', 1, convert(datetime,'07/12/1978',103), N' ')

--4
INSERT INTO GIAOVIEN VALUES ('GV01',  N'Đàm Vũng Hưng', 0, convert(datetime,'07/15/1989',101), 'MHH', N' ')
INSERT INTO GIAOVIEN VALUES ('GV03',  N'Nguyễn Duy Mạnh', 1, convert(datetime,'02/15/1999',101), 'MHL', N' ')
INSERT INTO GIAOVIEN VALUES ('GV02',  N'Trần Vĩnh Xuyên', 1, convert(datetime,'02/03/1985',101), 'MHT', N' ')
INSERT INTO GIAOVIEN VALUES ('GV04',  N'Huấn Hoa Phượng', 0, convert(datetime,'05/26/1989',101), 'MHT', N' ')
INSERT INTO GIAOVIEN VALUES ('GV05',  N'Tiến Thật Thà', 1, convert(datetime,'02/17/1999',101), 'MHH', N' ')
INSERT INTO GIAOVIEN VALUES ('GV06',  N'Lan Cẩm Thạch', 0, convert(datetime,'02/05/1989',101), 'MHL', N' ')

--5
INSERT INTO LOP VALUES ('10A3', 'K10', 'GV01', 10)
INSERT INTO LOP VALUES ('10A4', 'K10', 'GV02', 10)
INSERT INTO LOP VALUES ('10A5', 'K10', 'GV03', 10)
INSERT INTO LOP VALUES ('11A5', 'K10', 'GV04', 10)
INSERT INTO LOP VALUES ('11A6', 'K10', 'GV05', 10)
INSERT INTO LOP VALUES ('12A6', 'K10', 'GV06', 10)
INSERT INTO LOP VALUES ('12A7', 'K10', 'GV01', 10)
INSERT INTO LOP VALUES ('11A4', 'K11', 'GV02', 10)
INSERT INTO LOP VALUES ('12A5', 'K12', 'GV03', 10)

--6
INSERT INTO HOCSINH VALUES ('A001',  N'Huỳnh Chấn Thành', '10A3',1, convert(datetime,'01/25/2007',101), N' ')
INSERT INTO HOCSINH VALUES ('A002',  N'Nguyễn Trường Đông', '10A3', 1, convert(datetime,'02/12/2007',101),N' ')
INSERT INTO HOCSINH VALUES ('A003',  N'Hộ Thành Cổ', '10A3', 1, convert(datetime,'12/09/2007',101),N' ')
INSERT INTO HOCSINH VALUES ('A004',  N'Trần Nhật Long', '11A4',1, convert(datetime,'11/23/2007',101),N' ')
INSERT INTO HOCSINH VALUES ('A005',  N'Nguyễn Hữu Cảnh', '11A4', 1, convert(datetime,'05/25/2007',101),N' ')
INSERT INTO HOCSINH VALUES ('B001',  N'Cẩm Xuân', '11A4', 1, convert(datetime,'02/12/2007',101),N' ')
INSERT INTO HOCSINH VALUES ('B002',  N'Hà Anh Đào', '12A5',0, convert(datetime,'11/24/2007',101), N' ')
INSERT INTO HOCSINH VALUES ('B003',  N'Lý Tịnh Anh', '12A5', 0, convert(datetime,'05/18/2007',101), N' ')
INSERT INTO HOCSINH VALUES ('B004',  N'Phạm Oanh Oanh', '12A5', 0	, convert(datetime,'03/17/2007',101), N' ')

--7
INSERT INTO BANGDIEM VALUES ('001BD23', 'A001', N'Huỳnh Chấn Thành','10A3','MHT',0, N' ', 'NV01')
INSERT INTO BANGDIEM VALUES ('002BD23', 'A001', N'Huỳnh Chấn Thành','10A3','MHH',0, N' ', 'NV01')
INSERT INTO BANGDIEM VALUES ('003BD23', 'A001', N'Huỳnh Chấn Thành','10A3','MHL',0, N' ', 'NV01')

INSERT INTO BANGDIEM VALUES ('004BD23','A002',N'Nguyễn Trường Đông','10A3','MHT', 0, N' ', 'NV01')
INSERT INTO BANGDIEM VALUES ('005BD23','A002',N'Nguyễn Trường Đông','10A3','MHH', 0, N' ', 'NV01')
INSERT INTO BANGDIEM VALUES ('006BD23','A002',N'Nguyễn Trường Đông','10A3','MHL', 0, N' ', 'NV01')

INSERT INTO BANGDIEM VALUES ('007BD23','A003', N'Hộ Thành Cổ','10A3','MHT', 0, N' ' , 'NV01')
INSERT INTO BANGDIEM VALUES ('008BD23','A003', N'Hộ Thành Cổ','10A3','MHH', 0, N' ' , 'NV01')
INSERT INTO BANGDIEM VALUES ('009BD23','A003', N'Hộ Thành Cổ','10A3','MHL', 0, N' ' , 'NV01')

INSERT INTO BANGDIEM VALUES ('010BD23','A004', N'Trần Nhật Long','11A4','MHT', 0, N' ', 'NV02')
INSERT INTO BANGDIEM VALUES ('011BD23','A004', N'Trần Nhật Long','11A4','MHH', 0, N' ', 'NV02')
INSERT INTO BANGDIEM VALUES ('012BD23','A004', N'Trần Nhật Long','11A4','MHL', 0, N' ', 'NV02')

INSERT INTO BANGDIEM VALUES ('013BD23','A005', N'Nguyễn Hữu Cảnh','11A4','MHT',0, N' ','NV02')
INSERT INTO BANGDIEM VALUES ('014BD23','A005', N'Nguyễn Hữu Cảnh','11A4','MHH',0, N' ','NV02')
INSERT INTO BANGDIEM VALUES ('015BD23','A005', N'Nguyễn Hữu Cảnh','11A4','MHL',0, N' ','NV02')

INSERT INTO BANGDIEM VALUES ('016BD23', 'B001',  N'Cẩm Xuân','11A4','MHT', 0, N' ', 'NV02')
INSERT INTO BANGDIEM VALUES ('017BD23', 'B001',  N'Cẩm Xuân','11A4','MHH', 0, N' ', 'NV02')
INSERT INTO BANGDIEM VALUES ('018BD23', 'B001',  N'Cẩm Xuân','11A4','MHL', 0, N' ', 'NV02')

INSERT INTO BANGDIEM VALUES ('019BD23', 'B002',  N'Hà Anh Đào','12A5','MHT', 0, N' ', 'NV03')
INSERT INTO BANGDIEM VALUES ('020BD23', 'B002',  N'Hà Anh Đào','12A5','MHH', 0, N' ', 'NV03')
INSERT INTO BANGDIEM VALUES ('021BD23', 'B002',  N'Hà Anh Đào','12A5','MHL', 0, N' ', 'NV03')

INSERT INTO BANGDIEM VALUES ('022BD23', 'B003', N'Lý Tịnh Anh','12A5','MHT', 0, N' ', 'NV03')
INSERT INTO BANGDIEM VALUES ('023BD23', 'B003', N'Lý Tịnh Anh','12A5','MHH', 0, N' ', 'NV03')
INSERT INTO BANGDIEM VALUES ('024BD23', 'B003', N'Lý Tịnh Anh','12A5','MHL', 0, N' ', 'NV03')

INSERT INTO BANGDIEM VALUES ('025BD23', 'B004',  N'Phạm Oanh Oanh','12A5','MHT', 0, N' ', 'NV03')
INSERT INTO BANGDIEM VALUES ('026BD23', 'B004',  N'Phạm Oanh Oanh','12A5','MHH', 0, N' ', 'NV03')
INSERT INTO BANGDIEM VALUES ('027BD23', 'B004',  N'Phạm Oanh Oanh','12A5','MHL', 0, N' ', 'NV03')



INSERT INTO Users VALUES ('NHATDEP', '123', N'Hiệu Trưởng')
